# Task 실행 규칙 (Task Execution Rules)

## 목적
AI가 한 번에 모든 Task를 실행하지 않고, **하나씩 처리하며 단계별 검수**를 받아 품질을 보장하고 통제력을 강화합니다. 각 Task 완료마다 사람이 확인 후 다음 단계로 진행합니다.

## 핵심 원칙
1. **순차 실행**: 한 번에 반드시 **하나의 Task만** 실행
2. **검수 필수**: 각 Task 완료 후 반드시 사용자 승인 요청
3. **명확한 보고**: 결과, 코드, 설계, 테스트 상황을 요약 보고
4. **투명성**: 진행 상황을 지속적으로 공유

## Task 실행 프로세스

### 1단계: Task 선택
- Task 목록에서 **다음 실행할 Task** 하나를 선택
- 의존성이 있는 경우, 선행 Task 완료 여부 확인
- 선택한 Task를 사용자에게 공지

```
🔹 다음 Task를 실행합니다:
   [Task 번호] Task 내용
```

### 2단계: Task 실행
- 선택한 Task를 실행
- 실행 중 발생하는 모든 과정을 기록
- 에러 발생 시 즉시 보고하고 해결 방안 제시

### 3단계: 결과 보고
Task 완료 후 아래 정보를 사용자에게 보고:

```
✅ Task 완료: [Task 이름]

**수행 내용**:
- [구체적으로 무엇을 했는지]

**결과물**:
- [생성된 파일, 코드, 설정 등]

**테스트 결과**:
- [테스트 수행 여부 및 결과]

**이슈/특이사항**:
- [발생한 문제, 주의사항 등]

**다음 단계**:
- [다음에 실행할 Task 미리보기]

---
계속 진행하시겠습니까? (확인/수정 필요/중단)
```

### 4단계: 사용자 승인 대기
- 사용자의 명시적 승인 없이 다음 Task로 진행하지 않음
- 승인 키워드 예시: "확인", "OK", "진행", "Next", "Go", "계속"
- 수정 요청 시 현재 Task를 재실행
- 중단 요청 시 작업 일시 중지

### 5단계: 체크박스 업데이트
- Task 완료 시 `- [ ]`를 `- [x]`로 변경
- Task 목록 파일(TASKS.md)에 반영
- 진행 상황을 시각적으로 표시

### 6단계: 반복
- 모든 Task가 완료될 때까지 1~5단계 반복

## 실행 규칙 상세

### Rule 1: 한 번에 하나의 Task만
```markdown
❌ 잘못된 예시:
- Task 1 실행
- Task 2 실행
- Task 3 실행
- 전체 결과 보고

✅ 올바른 예시:
- Task 1 실행 → 결과 보고 → 승인 대기
  → 승인 받음
- Task 2 실행 → 결과 보고 → 승인 대기
  → 승인 받음
- Task 3 실행 → 결과 보고 → 승인 대기
```

### Rule 2: 사용자 승인 없이 진행 금지
```markdown
❌ 잘못된 동작:
AI: Task 1 완료했습니다. Task 2를 시작합니다.
   (사용자 승인 없이 자동 진행)

✅ 올바른 동작:
AI: Task 1 완료했습니다. 계속 진행하시겠습니까?
User: 확인
AI: Task 2를 시작합니다.
```

### Rule 3: 명확한 결과 요약
각 Task 완료 시 반드시 포함해야 할 정보:
- ✅ 무엇을 했는지 (수행 내용)
- ✅ 어떤 파일/코드를 생성/수정했는지
- ✅ 테스트는 성공했는지
- ✅ 발생한 이슈나 주의사항
- ✅ 다음 단계 미리보기

### Rule 4: 에러 처리
에러 발생 시:
1. 즉시 작업 중단
2. 에러 내용 상세히 보고
3. 원인 분석 제공
4. 해결 방안 2-3가지 제시
5. 사용자 선택 대기

```
❌ Task 실패: [Task 이름]

**에러 내용**:
[에러 메시지]

**원인 분석**:
[왜 발생했는지]

**해결 방안**:
1. [방안 1]
2. [방안 2]
3. [방안 3]

어떻게 진행하시겠습니까?
```

## Task 상태 관리

### Task 상태 종류
- `[ ]` **대기 (Pending)**: 아직 시작하지 않음
- `[▶]` **진행 중 (In Progress)**: 현재 실행 중
- `[x]` **완료 (Completed)**: 성공적으로 완료
- `[!]` **보류 (On Hold)**: 일시 중지 또는 블로킹됨
- `[~]` **스킵 (Skipped)**: 건너뜀 (선택 사항이었던 경우)

### 진행 상황 표시 예시
```markdown
## 1. 환경 설정
- [x] 프로젝트 초기화
- [x] GCP 프로젝트 생성
- [▶] n8n 설치 및 설정  ← 현재 진행 중
- [ ] Apify 계정 설정
- [ ] API 키 발급

진행률: 40% (2/5 완료)
```

## Human-in-the-Loop (HITL) 지점

특정 Task는 **반드시 사람의 검수가 필요**합니다:

### HITL이 필요한 Task
1. **콘텐츠 생성 결과물**: 상세페이지, 광고 카피
2. **중요한 설정 변경**: API 키, 보안 설정
3. **비용이 발생하는 작업**: 유료 API 호출, 클라우드 리소스 생성
4. **외부 서비스 연동**: OAuth 인증, API 연결
5. **데이터 삭제/변경**: 기존 데이터 수정이나 삭제

### HITL Task 표시 방법
```markdown
- [ ] [HITL] LLM으로 상세페이지 초안 생성
  - [ ] Claude API로 초안 생성
  - [ ] Notion에 저장
  - [ ] **👤 사람 검수**: 초안 내용 확인 및 수정
  - [ ] 최종 승인 후 다음 단계 진행
```

## 품질 검증 체크리스트

각 Task 완료 시 아래 항목을 자체 검증:

### 기능 구현
- [ ] 요구사항대로 정확히 구현되었는가?
- [ ] 엣지 케이스(예외 상황)를 고려했는가?
- [ ] 에러 핸들링이 적절한가?

### 코드 품질
- [ ] 코드가 읽기 쉽고 명확한가?
- [ ] 필요한 주석이 포함되었는가?
- [ ] 베스트 프랙티스를 따랐는가?

### 테스트
- [ ] 기본 동작이 정상적으로 작동하는가?
- [ ] 테스트 케이스를 실행했는가?
- [ ] 예상 결과와 실제 결과가 일치하는가?

### 문서화
- [ ] 변경사항이 문서에 반영되었는가?
- [ ] 설정 방법이 명확히 기록되었는가?
- [ ] 다른 사람이 이해하고 실행할 수 있는가?

## 진행 상황 리포트

정기적으로 (또는 사용자 요청 시) 전체 진행 상황을 리포트:

```markdown
# 프로젝트 진행 상황 리포트

**날짜**: 2024-01-15
**전체 진행률**: 45% (18/40 Tasks 완료)

## 완료된 주요 마일스톤
✅ 환경 설정 (100%)
✅ 상품 소싱 자동화 (100%)
▶️ 경쟁사 분석 (60%)
⏳ 콘텐츠 생성 (0%)

## 현재 진행 중
- [Task 3.4] LLM 분석 프롬프트 최적화

## 다음 단계
1. LLM 분석 결과 검증
2. Notion 연동 설정
3. 콘텐츠 생성 파이프라인 구축

## 이슈 및 리스크
- ⚠️ Facebook Ads Library API Rate Limit 고려 필요
- ✅ Apify 무료 플랜 제약 → 유료 플랜 전환 검토

## 예상 일정
- 경쟁사 분석 완료: 1주일 내
- 콘텐츠 생성 구현: 2주일 내
```

## 커뮤니케이션 가이드

### AI → 사용자
- 명확하고 간결하게
- 전문 용어는 설명과 함께
- 시각적 구분 (이모지, 마크다운 활용)
- 선택지 제공 (사용자가 결정할 수 있도록)

### 사용자 → AI 응답 예시
- **진행**: "확인", "OK", "진행", "Next"
- **수정**: "수정 필요", "다시 해줘", "이 부분 고쳐줘"
- **질문**: "왜 이렇게 했어?", "다른 방법은?"
- **중단**: "중단", "Stop", "일단 여기까지"

## 특수 상황 처리

### 의존성 블로킹
```markdown
⚠️ Task 실행 불가: [Task 이름]

**사유**: 선행 Task [Task #X]가 완료되지 않음

**대응**:
- 옵션 1: Task #X를 먼저 완료
- 옵션 2: Task 순서 재조정
- 옵션 3: Task를 보류하고 다른 Task 진행

어떻게 하시겠습니까?
```

### 외부 요인 대기
```markdown
⏸️ Task 일시 중단: [Task 이름]

**사유**: 외부 API 키 발급 대기 중

**필요 조치**:
1. [서비스명]에서 API 키 발급
2. .env 파일에 API 키 추가
3. 완료 후 "재개" 입력

대기 상태로 전환합니다.
```

## 체크리스트: Task 실행 전

매 Task 실행 전 확인:
- [ ] 이전 Task가 완료되었는가?
- [ ] 사용자 승인을 받았는가?
- [ ] 필요한 도구/리소스가 준비되었는가?
- [ ] 의존성이 해결되었는가?
- [ ] Task 내용을 정확히 이해했는가?

## 체크리스트: Task 실행 후

매 Task 완료 후 확인:
- [ ] 요구사항을 모두 충족했는가?
- [ ] 테스트를 통과했는가?
- [ ] 결과물을 명확히 보고했는가?
- [ ] 체크박스를 업데이트했는가?
- [ ] 사용자 승인을 요청했는가?

## 예시: 실제 실행 흐름

```markdown
🔹 Task 1 시작: 프로젝트 디렉토리 생성

[실행 중...]

✅ Task 1 완료

**수행 내용**:
- /Users/charlee/Desktop/Project 디렉토리 생성
- Git 초기화 (.git 폴더 생성)
- .gitignore 파일 생성 (.env, node_modules 추가)

**결과물**:
- 디렉토리 구조:
  Project/
  ├── .git/
  └── .gitignore

**테스트 결과**:
✅ git status 정상 작동 확인

**다음 단계**:
- Task 2: GCP 프로젝트 생성

---
계속 진행하시겠습니까?
```

```markdown
[사용자 입력: "확인"]

✅ 승인 확인. Task 2를 시작합니다.

🔹 Task 2 시작: GCP 프로젝트 생성
...
```

## 참고사항
- 이 규칙은 **모든 Task 실행 시 엄격히 준수**합니다
- AI는 절대로 사용자 승인 없이 다음 Task로 넘어가지 않습니다
- 사용자는 언제든지 "중단" 또는 "수정" 요청 가능합니다
- 모든 진행 상황은 투명하게 공유됩니다
