# Task 생성 규칙 (Task Generation Rules)

## 목적
PRD에 정의된 청사진을 실제 구현을 위한 **실행 가능한 할 일(Task) 목록**으로 분해하여, 작업 관리를 용이하게 하고 AI가 실수 없이 단계적으로 작업을 진행할 수 있도록 합니다.

## 핵심 원칙
1. **구체성**: 각 Task는 명확하고 실행 가능한 단위로 작성
2. **순서성**: 작업의 의존 관계를 고려하여 논리적 순서로 배치
3. **완결성**: PRD의 모든 요구사항이 Task로 변환되어야 함
4. **추적성**: 각 Task가 PRD의 어느 항목과 연결되는지 명확히 함

## Task 생성 프로세스

### 1단계: PRD 분석
- PRD의 모든 핵심 기능 및 요구사항을 철저히 분석
- 필수 기능과 선택 기능을 구분
- 기능 간 의존 관계 파악

### 2단계: 작업 단위 분해
각 기능을 다음 단위로 분해:
1. **Epic (대항목)**: 큰 기능 단위 (예: 상품 소싱 자동화)
2. **Task (중항목)**: 구현 가능한 작업 단위 (예: Apify Actor 설정)
3. **Sub-Task (소항목)**: 세부 실행 단계 (예: API 키 발급, 테스트 실행)

### 3단계: 우선순위 및 순서 결정
- 의존성: A 작업이 완료되어야 B 작업 시작 가능
- 중요도: 필수(MVP) → 선택(Nice-to-have)
- 리스크: 높은 리스크 작업은 먼저 검증

## Task 작성 형식

### 마크다운 체크박스 형식
```markdown
- [ ] Task 내용
  - [ ] Sub-task 내용
```

### Task 작성 규칙
1. **동사로 시작**: "구현하다", "설정하다", "테스트하다" 등
2. **명확한 완료 조건**: 무엇을 하면 완료인지 분명히 표시
3. **도구/기술 명시**: 어떤 도구를 사용하는지 괄호로 표기 (예: [n8n])
4. **예상 시간 표기 (선택)**: 대략적인 소요 시간 표시 가능

### 계층 구조 예시
```markdown
## 2. 상품 소싱 자동화 (Epic)
- [ ] 데이터 수집 환경 구축 (Task)
  - [ ] Apify 계정 생성 및 API 키 발급 (Sub-task)
  - [ ] 쿠팡/네이버 크롤링 Actor 테스트 실행 (Sub-task)
- [ ] n8n 워크플로우 구현 (Task)
  - [ ] Apify 노드 연결 및 설정 (Sub-task)
  - [ ] 데이터 필터링 로직 구현 (Sub-task)
```

## Task 목록 템플릿 구조

### 1. 환경 설정 (Environment Setup)
- 프로젝트 초기화
- 필요한 도구 및 서비스 가입
- API 키 발급 및 설정
- 개발 환경 구축

### 2. 인프라 구축 (Infrastructure)
- 클라우드 환경 설정
- 데이터베이스 설정
- 스토리지 설정
- 네트워크 및 보안 설정

### 3. 핵심 기능 구현 (Core Features)
PRD의 각 핵심 기능별로:
- 데이터 수집/처리
- AI/LLM 연동
- 자동화 워크플로우 구축
- API 연동

### 4. 통합 및 테스트 (Integration & Testing)
- 단위 테스트
- 통합 테스트
- End-to-End 테스트
- 성능 테스트

### 5. 배포 및 운영 (Deployment & Operations)
- 배포 환경 구축
- CI/CD 파이프라인 설정
- 모니터링 설정
- 문서화

### 6. 최적화 및 개선 (Optimization)
- 성능 최적화
- 비용 최적화
- 사용자 피드백 반영

## Task 작성 시 주의사항

### ✅ 좋은 Task 예시
```markdown
- [ ] [n8n] Apify 노드를 사용하여 쿠팡 베스트셀러 상품 데이터 수집 워크플로우 구현
  - [ ] Apify Actor 'coupang-scraper' 선택 및 Input 설정
  - [ ] 카테고리별 URL 리스트 작성 (전자제품, 패션, 뷰티)
  - [ ] 테스트 실행 후 Sample 데이터 10개 추출 확인
  - [ ] 에러 핸들링 로직 추가 (API 실패 시 재시도)
```

**좋은 이유**:
- 구체적인 도구 명시 ([n8n], Apify Actor)
- 명확한 완료 조건 (Sample 데이터 10개 추출)
- 세부 단계 포함 (Input 설정, 테스트, 에러 핸들링)

### ❌ 나쁜 Task 예시
```markdown
- [ ] 데이터 수집 기능 만들기
```

**나쁜 이유**:
- 너무 추상적
- 완료 조건 불명확
- 도구/기술 미명시
- 세부 단계 없음

## Task 메타 정보 (선택 사항)

각 Task에 추가 정보를 태그로 표시할 수 있습니다:

```markdown
- [ ] Task 내용
  - **담당**: AI Agent / Human Review
  - **예상 시간**: 2시간
  - **우선순위**: P0 (긴급) / P1 (높음) / P2 (보통) / P3 (낮음)
  - **의존성**: Task #1, #3 완료 필요
  - **리스크**: 높음 (외부 API 의존)
  - **검증 방법**: 단위 테스트 통과, 수동 확인
```

## Task 완료 기준

각 Task는 아래 조건을 만족해야 "완료"로 간주됩니다:

1. **기능 구현**: 요구사항대로 동작함
2. **테스트 통과**: 관련 테스트가 모두 성공
3. **문서화**: 필요한 경우 코드 주석 또는 문서 작성
4. **검토 완료**: 사람 또는 AI의 검수 통과

## 의존성 관리

Task 간 의존 관계를 명확히 표시:

```markdown
## 3. 경쟁사 분석
- [ ] [A] Facebook Ads Library 데이터 수집 설정
- [ ] [B] 수집된 광고 데이터 LLM 분석 파이프라인 구현
  - **의존성**: [A] 완료 필요
- [ ] [C] 분석 결과를 Notion에 자동 저장
  - **의존성**: [B] 완료 필요
```

## 리스크가 높은 Task 표시

불확실성이 높거나 실패 가능성이 있는 Task는 명시:

```markdown
- [ ] [리스크: 높음] 쿠팡 API를 사용한 자동 상품 등록 구현
  - **리스크 사유**: 쿠팡 API 정책 변경 가능성, Rate Limit 존재
  - **대응 방안**: 수동 업로드 대체 방안 준비, API 모니터링 설정
```

## 반복 작업 (Iterative Tasks)

여러 번 수행해야 하는 작업은 명확히 표시:

```markdown
- [ ] LLM 프롬프트 최적화 (반복)
  - [ ] 1차 프롬프트 작성 및 테스트
  - [ ] 결과 분석 및 개선점 도출
  - [ ] 2차 프롬프트 작성 및 재테스트
  - [ ] 최종 프롬프트 확정
```

## Task 목록 검토 체크리스트

Task 생성 완료 후 아래 항목을 확인:

- [ ] PRD의 모든 필수 기능이 Task로 변환되었는가?
- [ ] 각 Task가 구체적이고 실행 가능한가?
- [ ] Task 간 의존 관계가 명확히 표시되었는가?
- [ ] 우선순위가 명확히 구분되었는가?
- [ ] 각 Task의 완료 조건이 명확한가?
- [ ] 환경 설정 → 구현 → 테스트 → 배포 순서가 논리적인가?
- [ ] 리스크가 높은 Task가 식별되고 대응 방안이 있는가?

## 예시: 완전한 Task 목록 구조

```markdown
# AI 마케팅 해커 자동화 시스템 - Task List

## 1. 환경 설정 (Environment Setup)
- [ ] 프로젝트 초기화
  - [ ] Git 저장소 생성 및 .gitignore 설정
  - [ ] README.md 작성 (프로젝트 개요, 설치 방법)
  - [ ] .env.example 파일 생성 (API 키 템플릿)
- [ ] GCP 환경 구축
  - [ ] GCP 프로젝트 생성
  - [ ] Compute Engine 인스턴스 설정 (n8n 호스팅용)
  - [ ] Cloud Storage 버킷 생성 (데이터 저장용)
  - [ ] IAM 권한 설정

## 2. 도구 연동 준비
- [ ] n8n 설치 및 설정
  - [ ] 셀프호스팅 vs 클라우드 비교 분석
  - [ ] 선택한 방식으로 n8n 설치
  - [ ] 초기 워크플로우 테스트
- [ ] Apify 계정 설정
  - [ ] Apify 가입 및 API 키 발급
  - [ ] 무료/유료 플랜 비교 및 선택
  - [ ] 테스트 Actor 실행

## 3. 상품 소싱 자동화
- [ ] 쿠팡 데이터 수집
  - [ ] Apify에서 Coupang Scraper Actor 찾기
  - [ ] 카테고리별 URL 설정
  - [ ] n8n에서 Apify 노드 연결
  - [ ] 수집 데이터 Google Sheets 저장
- [ ] 네이버 쇼핑 데이터 수집
  - [ ] 네이버 쇼핑 API 키 발급
  - [ ] n8n에서 API 호출 워크플로우 구현
  - [ ] 데이터 필터링 로직 추가

## 4. 경쟁사 광고 분석
- [ ] Facebook Ads Library 크롤링
  - [ ] Apify Facebook Ads Scraper 설정
  - [ ] 타겟 키워드/브랜드 리스트 작성
  - [ ] 광고 데이터 수집 및 저장
- [ ] LLM 분석 파이프라인
  - [ ] Gemini API 연동 (광고 분석용)
  - [ ] 프롬프트 작성: 타겟 분석, 카피 분석, 키워드 추출
  - [ ] n8n에서 분석 결과 파싱

## 5. 콘텐츠 생성
- [ ] Claude API 연동 (한국어 카피 생성)
  - [ ] API 키 발급 및 n8n 설정
  - [ ] 상세페이지 생성 프롬프트 작성
  - [ ] 광고 카피 생성 프롬프트 작성
- [ ] Human-in-the-Loop 구현
  - [ ] 초안 생성 후 Notion에 저장
  - [ ] 사용자에게 알림 전송 (Slack/Email)
  - [ ] 피드백 반영 프로세스 구현

## 6. 최종 테스트 및 배포
- [ ] End-to-End 테스트
  - [ ] 전체 파이프라인 실행 테스트
  - [ ] 에러 케이스 시나리오 테스트
  - [ ] 성능 테스트 (처리 시간, API 호출 횟수)
- [ ] 문서화
  - [ ] 사용자 매뉴얼 작성
  - [ ] 운영 가이드 작성
  - [ ] 트러블슈팅 가이드 작성
```

## 참고사항
- 이 규칙 파일은 모든 Task 생성 시 참조해야 합니다
- Task는 PRD 승인 후에 생성됩니다
- Task 실행은 "Task 실행 규칙"을 따릅니다
- AI 에이전트는 한 번에 하나의 Task만 실행합니다
